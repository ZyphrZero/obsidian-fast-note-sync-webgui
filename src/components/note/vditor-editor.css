.vditor {
  background-color: transparent !important;
  border: none !important;
}

.vditor-toolbar {
  background-color: transparent !important;
}

/* 针对预览区域的代码块 */
.vditor-reset pre,
.vditor-reset code {
  background-image: none !important; /* 强制取消背景图片 */
  background-color: #f6f8fa; /* 可选：设置一个纯色背景 */
}

/* 如果是在即时渲染(IR)模式下 */
.vditor-ir__node--pre {
  background-image: none !important;
}

.vditor-container {
  width: 100%;
  height: 100%;
  font-family: inherit !important;
}

.vditor-container .vditor,
.vditor-container .vditor-reset,
.vditor-container .vditor-ir,
.vditor-container .vditor-sv,
.vditor-container .vditor-wysiwyg,
.vditor-container .vditor-preview {
  font-family: inherit !important;
}

.vditor-container .vditor {
  border: none !important;
  border-radius: 0 !important;
}

.vditor-container .vditor-toolbar {
  border-bottom: 1px solid var(--border) !important;
  padding: 4px 8px !important;
}

.vditor-container .vditor-content {
  padding: 16px !important;
}

/* 字数统计样式 */
.vditor-container .vditor-counter {
  padding: 4px 12px;
  font-size: 12px;
  color: hsl(var(--muted-foreground));
  border-top: 1px solid hsl(var(--border));
}

/* 大纲样式 */
.vditor-container .vditor-outline {
  border-left: 1px solid hsl(var(--border));
  background-color: transparent !important;
}

.vditor-container .vditor-outline__content {
  padding: 8px;
}

.vditor-container .vditor-outline__item {
  padding: 4px 8px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

.vditor-container .vditor-outline__item:hover {
  background-color: hsl(var(--accent));
}

/* 暗色主题适配 */
.dark .vditor-container .vditor {
  background-color: transparent !important;
}

.dark .vditor-container .vditor-toolbar {
  background-color: transparent !important;
  border-color: hsl(var(--border)) !important;
}

.dark .vditor-container .vditor-ir {
  background-color: transparent !important;
}

.dark .vditor-container .vditor-sv {
  background-color: transparent !important;
}

.dark .vditor-container .vditor-wysiwyg {
  background-color: transparent !important;
}

.dark .vditor-container .vditor-outline {
  background-color: transparent !important;
  border-color: hsl(var(--border)) !important;
}

.dark .vditor-container .vditor-counter {
  border-color: hsl(var(--border)) !important;
}

/* 修复 tooltip 被遮挡问题 */
.vditor-container .vditor-toolbar {
  overflow: visible !important;
}

.vditor-container .vditor-hint,
.vditor-container .vditor-tip {
  z-index: 9999 !important;
}

/* 工具栏下拉菜单 */
.vditor-container .vditor-toolbar .vditor-panel--arrow,
.vditor-container .vditor-toolbar .vditor-hint {
  z-index: 9999 !important;
}

/* 鼠标悬停显示滚动条 - 防止布局抖动方案 */
.vditor-ir .vditor-reset,
.vditor-wysiwyg .vditor-reset,
.vditor-sv.vditor-reset,
.vditor-preview,
.vditor-outline,
.vditor-reset pre,
.vditor-reset pre > code,
.vditor-reset code {
  /* Firefox: 使用 thin 但通过颜色隐藏，防止抖动 */
  scrollbar-width: thin !important;
  scrollbar-color: transparent transparent !important;
  transition: scrollbar-color 0.3s ease;
}

.vditor-ir .vditor-reset:hover,
.vditor-wysiwyg .vditor-reset:hover,
.vditor-sv.vditor-reset:hover,
.vditor-preview:hover,
.vditor-outline:hover,
.vditor-reset pre:hover,
.vditor-reset pre > code:hover,
.vditor-reset code:hover {
  scrollbar-color: rgba(128, 128, 128, 0.3) transparent !important;
}
.vditor-sv {
  border-right: 1px solid var(--border) !important;
  border-radius: 0 !important;
  background-color: transparent !important;
}

/* 移除预览模式左侧边框 */
.vditor-preview {
  margin-left: 0px !important;
  padding-left: 10px !important;
  background-color: transparent !important;
  border: none !important;
}

/* 编辑器表格样式增强 */
.vditor-reset table {
  border-collapse: collapse !important;
  width: 100%;
}

.vditor-reset table td,
.vditor-reset table th {
  border: 1px solid var(--border) !important;
  padding: 6px 13px !important;
}

.vditor-reset table tr {
  background-color: transparent;
  border-top: 1px solid var(--border) !important;
}

/* 修复全屏模式下被顶部导航条遮挡的问题 */
.vditor--fullscreen {
  z-index: 10000 !important;
}

/* 当编辑器全屏时，降低顶部导航栏的层级 */
body:has(.vditor--fullscreen) header {
  z-index: 40 !important;
}

/* 纯预览模式 (阅读模式) 优化 */
.vditor-container--preview-only .vditor-sv.vditor-reset {
  display: none !important; /* 隐藏编辑器源码部分 */
}

.vditor-container--preview-only .vditor-toolbar {
  display: none !important; /* 隐藏空工具栏及其边框 */
}

.vditor-container--preview-only .vditor-preview {
  display: block !important;
  width: 100% !important;
  border-left: none !important;
}

.vditor-container--preview-only .vditor-preview > .vditor-reset {
  max-width: 900px !important; /* 保持适中的阅读宽度 */
  margin: 0 auto !important; /* 居中显示 */
  padding: 40px 20px !important;
}

/* Webkit 浏览器 (Chrome/Safari/Edge) */
.vditor-ir .vditor-reset::-webkit-scrollbar,
.vditor-wysiwyg .vditor-reset::-webkit-scrollbar,
.vditor-sv.vditor-reset::-webkit-scrollbar,
.vditor-preview::-webkit-scrollbar,
.vditor-outline::-webkit-scrollbar,
.vditor-reset pre::-webkit-scrollbar,
.vditor-reset pre > code::-webkit-scrollbar,
.vditor-reset code::-webkit-scrollbar {
  width: 6px !important;
  height: 6px !important;
  display: block !important; /* 始终保持宽度，防止抖动 */
}

/* 轨道始终透明 */
.vditor-ir .vditor-reset::-webkit-scrollbar-track,
.vditor-wysiwyg .vditor-reset::-webkit-scrollbar-track,
.vditor-sv.vditor-reset::-webkit-scrollbar-track,
.vditor-preview::-webkit-scrollbar-track,
.vditor-outline::-webkit-scrollbar-track,
.vditor-reset pre::-webkit-scrollbar-track,
.vditor-reset pre > code::-webkit-scrollbar-track,
.vditor-reset code::-webkit-scrollbar-track {
  background: transparent !important;
}

.vditor-ir .vditor-reset::-webkit-scrollbar-thumb,
.vditor-wysiwyg .vditor-reset::-webkit-scrollbar-thumb,
.vditor-sv.vditor-reset::-webkit-scrollbar-thumb,
.vditor-preview::-webkit-scrollbar-thumb,
.vditor-outline::-webkit-scrollbar-thumb,
.vditor-reset pre::-webkit-scrollbar-thumb,
.vditor-reset pre > code::-webkit-scrollbar-thumb,
.vditor-reset code::-webkit-scrollbar-thumb {
  background-color: transparent !important; /* 默认透明 */
  border-radius: 3px !important;
  transition: background-color 0.3s ease;
}

/* 只有当鼠标悬停在容器上时，thumb 才变色 */
.vditor-ir .vditor-reset:hover::-webkit-scrollbar-thumb,
.vditor-wysiwyg .vditor-reset:hover::-webkit-scrollbar-thumb,
.vditor-sv.vditor-reset:hover::-webkit-scrollbar-thumb,
.vditor-preview:hover::-webkit-scrollbar-thumb,
.vditor-outline:hover::-webkit-scrollbar-thumb,
.vditor-reset pre:hover::-webkit-scrollbar-thumb,
.vditor-reset pre > code:hover::-webkit-scrollbar-thumb,
.vditor-reset code:hover::-webkit-scrollbar-thumb {
  background-color: rgba(128, 128, 128, 0.3) !important;
}

.vditor-ir .vditor-reset::-webkit-scrollbar-thumb:hover,
.vditor-wysiwyg .vditor-reset::-webkit-scrollbar-thumb:hover,
.vditor-sv.vditor-reset::-webkit-scrollbar-thumb:hover,
.vditor-preview::-webkit-scrollbar-thumb:hover,
.vditor-outline::-webkit-scrollbar-thumb:hover,
.vditor-reset pre::-webkit-scrollbar-thumb:hover,
.vditor-reset pre > code::-webkit-scrollbar-thumb:hover,
.vditor-reset code::-webkit-scrollbar-thumb:hover {
  background-color: rgba(128, 128, 128, 0.5) !important;
}
